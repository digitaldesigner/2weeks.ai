$(document).ready(function(){function e(){var e=$("li.lesson").not(".completed").not(".intro").first(),t=$("#todo-list .lesson.completed").not(".intro").length,o=$("#todo-list");if(e.length){if(t>0){var s=$(e[0]),l=o.width(),a=s.position(),n=s.outerWidth(),c=a.left-l/2+n/2,i=.05*$(window).width();o.animate({scrollLeft:c-i},10)}}else o.scrollLeft(0)}function t(){$(".embed").each(function(){!function e(t){var o=$(t).attr("data-video-id");if(o){var s=$("<iframe>",{src:"https://www.youtube.com/embed/"+o+"?autoplay=0",frameborder:0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,css:{width:"100%",height:"100%"}});$(t).html(s)}}(this)})}function o(){var e=$("#todo-list .lesson").not(".intro").length,t=$("#todo-list .lesson.completed").not(".intro").length;if(e===t){let o=new Date;o.setHours(0,0,0,0);let s=localStorage.getItem("startDate");s?(s=new Date(s)).setHours(0,0,0,0):(localStorage.setItem("startDate",o),s=o,fathom.trackEvent("course_complete"));let l=Math.floor((o-s)/864e5)+1,a=l.toString().padStart(2,"0");$.get("daily/prompt-"+a+".md").done(function(e){if($("#prompt-number").html(l),!$("li.expose").length){let t=new marked.Renderer;t.blockquote=function(e){return"<blockquote>"+e.text+"<button>Try</button></blockquote>"},marked.use({renderer:t}),$("#daily-file").html(marked.parse(e)),$("#daily").removeClass("open").addClass("open"),$("#prompt-background").show()}}).fail(function(){console.log("Fresh out of daily prompts")})}}if($("#bump").click(function(){e()}),$(".fetchmd").each(function(){let e=$(this).attr("data-src");fetch(e).then(e=>e.text()).then(e=>{let t=new marked.Renderer;t.blockquote=function(e){return"<blockquote>"+e.text+'<button class="gpt">Try</button></blockquote>'},marked.use({renderer:t}),$(this).html(marked.parse(e))}).catch(e=>console.error("Error fetching lesson:",e))}),$("#todo-list").on("change",".complete-task",function(e){let t=$(this).closest("li").index(),s=$(this).is(":checked");if(e.preventDefault(),s){$(this).closest("li.lesson").addClass("completed");let l={spread:360,ticks:50,gravity:0,decay:.94,startVelocity:30,shapes:["star"],colors:["47C47D"]};function a(){confetti({...l,particleCount:40,scalar:1.2,shapes:["star"]}),confetti({...l,particleCount:10,scalar:.75,shapes:["circle"]})}setTimeout(a,0),setTimeout(a,100),setTimeout(a,200);var n,c,i=$(this).closest("li.lesson");fathom.trackEvent("lesson_complete"),i.removeClass("expose").find(".contents").scrollTop(0),$("body").removeClass("expose"),$("#todo-list").toggleClass("modal"),i[0].scrollIntoView({block:"center",inline:"center"}),history.replaceState(null,null,window.location.pathname),o()}else $(this).closest("li").removeClass("completed");n=t,c=s,localStorage.setItem("task-"+n,c)}),$("#todo-list li.lesson").each(function(e,t){let o=localStorage.getItem("task-"+e),s=localStorage.getItem("task-seen-"+e);if("true"===o&&($(this).find('input[type="checkbox"]').prop("checked",!0),$(this).addClass("completed")),s)Date.now(),parseInt(s,10);else{let l=Date.now();localStorage.setItem("task-seen-"+e,l)}}),$(".expander").click(function(){!function e(o){var s=$(o).parent();if(s.hasClass("expose"))$(s).removeClass("expose"),$("#todo-list").removeClass("modal"),$("body").removeClass("expose"),s[0].scrollIntoView({block:"center",inline:"center"}),$(s).find(".contents").scrollTop(0),history.replaceState(null,null,window.location.pathname);else{var l=s.offset(),a=l.left-window.scrollX,n=l.top-window.scrollY,c=s.width(),i=s.height();$(s).css({position:"fixed",left:a,top:n,width:c,height:i}),$(s).find(".contents").scrollTop(0),$(s).find(".contents").fadeTo(0,0),$("#todo-list").toggleClass("modal"),$(s).removeAttr("style").toggleClass("expose"),$(s).find(".contents").stop().delay(300).fadeTo(400,1),t(),"lesson-0"!==s[0].id?(history.pushState(null,null,"#"+s[0].id),fathom.trackEvent("lesson_open")):fathom.trackEvent("intro_open")}}(this)}),$("#donate").click(function(e){e.preventDefault(),$("#about").addClass("open"),$("#prompt-background").show()}),$(".dismiss").click(function(e){e.preventDefault(),$("#prompt-background").hide(),$("#daily,#about").removeClass("open");let t={spread:360,ticks:50,gravity:0,decay:.94,startVelocity:30,shapes:["star"],colors:["FFE258"]};function o(){confetti({...t,particleCount:40,scalar:1.2,shapes:["star"]}),confetti({...t,particleCount:10,scalar:.75,shapes:["circle"]})}setTimeout(o,0),setTimeout(o,100)}),$("body").on("click","button.gpt",function(){var e=$(this).parent().text();e=e.slice(0,-3);var t=$("<textarea>");$("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove(),$(this).addClass("done"),window.open("https://chat.openai.com/?q="+encodeURIComponent(e)),fathom.trackEvent("gpt shortcut")}),$("body").on("click","pre",function(){let e=$(this).find("code"),t=e.text().trim(),o=t.match(/"([^"]*)"/);if(o){let s=o[1];var l=$("<textarea>");$("body").append(l),l.val(s).select(),document.execCommand("copy"),l.remove(),$(this).addClass("done"),$(e).select(),window.open("https://chat.openai.com/?q="+encodeURIComponent(s))}}),e(),window.location.hash){var s=window.location.hash;$(s).length&&($("li.expose").removeClass("expose"),$("li"+s).addClass("expose"),$("#todo-list").addClass("modal"),$("body").addClass("expose"),t())}$('a[href^="#"]').on("click",function(e){e.preventDefault();var o=$(this).attr("href");$(o).length&&(history.pushState(null,null," "),$("li.expose").removeClass("expose"),$("li"+o).addClass("expose"),$("#todo-list").addClass("modal"),$("body").addClass("expose"),t())}),o(),document.querySelectorAll(".expander").forEach(e=>{let t=0,o=0;e.addEventListener("touchstart",e=>{t=e.touches[0].clientX,o=e.touches[0].clientY}),e.addEventListener("touchend",s=>{let l=s.changedTouches[0].clientX,a=s.changedTouches[0].clientY,n=o-a,c=Math.abs(t-l);n>100&&c<.2*n&&$(e).trigger("click")})}),$("#loader").addClass("ready")}),$(window).on("hashchange",function(){var e=window.location.hash;$(e).length&&($("li.expose").removeClass("expose"),$("li"+e).addClass("expose"),$("#todo-list").addClass("modal"),$("body").addClass("expose"))}),$(document).keydown(function(e){if(27==e.keyCode){var t=$("li.expose"),o=$("#daily");o.length&&o.hasClass("open")?($("#prompt-background").hide(),$("#daily").removeClass("open")):t.length&&(history.replaceState(null,null,window.location.pathname),$(t).removeClass("expose"),$("#todo-list").removeClass("modal"),$("body").removeClass("expose"),t[0].scrollIntoView({block:"center",inline:"center"}),$(t).find(".contents").scrollTop(0))}});